{{ define "main" }}

<!-- Profile intro -->
<section class="my-8 md:my-14">
  <div class="home-hero">
    <div class="home-hero__avatar">
      <img class="w-20 h-20 rounded-full bg-white" style="object-fit: cover; object-position: 30% 30%;" src="{{ .Site.Params.Author.avatar | relURL }}" alt="{{ .Site.Params.Author.name }}">
    </div>
    <div>
      <p class="section-kicker">Hồ sơ</p>
      <h1 class="home-hero__title">{{ .Site.Params.Author.name }}</h1>
      <p class="home-hero__bio">{{ .Site.Params.Author.bio }}</p>
      <div class="home-hero__actions">
        <a class="btn-primary" href="{{ "about" | relURL }}">Xem About</a>
        <a class="btn-ghost" href="{{ "contact" | relURL }}">Contact</a>
      </div>
    </div>
  </div>
</section>

<section class="home-section">
  <div class="section-head">
    <div>
      <p class="section-kicker">Chủ đề</p>
      <h2 class="section-title">Chủ đề chính</h2>
      <p class="section-subtitle">Tập trung vào hệ thống mạng, backend, và ứng dụng AI cho bài toán thực tế.</p>
    </div>
  </div>
  <div class="topic-grid">
    <div class="topic-card">
      <p class="topic-card__kicker">Networking</p>
      <h3 class="topic-card__title">Lập trình mạng</h3>
      <p class="topic-card__desc">TCP/UDP, HTTP, WebSocket, thiết kế hệ thống ổn định.</p>
    </div>
    <div class="topic-card">
      <p class="topic-card__kicker">Backend</p>
      <h3 class="topic-card__title">API & dịch vụ</h3>
      <p class="topic-card__desc">Thiết kế API rõ ràng, logging, retry và bảo mật cơ bản.</p>
    </div>
    <div class="topic-card">
      <p class="topic-card__kicker">AI</p>
      <h3 class="topic-card__title">Machine Learning</h3>
      <p class="topic-card__desc">Từ dữ liệu đến mô hình và ứng dụng recommendation.</p>
    </div>
  </div>
</section>

<section class="home-section">
  <div class="section-head">
    <div>
      <p class="section-kicker">Nổi bật</p>
      <h2 class="section-title">Bài viết nổi bật</h2>
      <p class="section-subtitle">Các bài viết tiêu biểu và dễ đọc để bắt đầu.</p>
    </div>
    <a class="section-link" href="{{ "posts" | relURL }}">Xem tất cả</a>
  </div>

  {{- $featured := where .Site.RegularPages "Params.tags" "intersect" (slice "feature" ) -}}
  {{- if lt (len $featured) 1 -}}
    {{- $featured = first 3 (where site.RegularPages "Type" "in" site.Params.mainSections) -}}
  {{- else -}}
    {{- $featured = first 3 $featured -}}
  {{- end -}}

  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    {{ range $featured }}
      {{- partial "content/card" . -}}
    {{ end }}
  </div>
</section>

<section class="home-section">
  <div class="section-head">
    <div>
      <p class="section-kicker">Cập nhật</p>
      <h2 class="section-title">Bài viết mới</h2>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

  {{ $paginator := .Paginate ( where site.RegularPages "Type" "in" site.Params.mainSections) }}

  {{ range $paginator.Pages }}

    {{- partial "content/card" . -}}

  {{ end }}

  </div>

  <div class="flex items-center mt-10">
    {{- if $paginator.HasPrev -}}
      <a class="border rounded-full px-6 py-2 hover:bg-zinc-200 mr-auto" href="{{ $paginator.Prev.URL }}">&lt; Trước</a>
    {{- end -}}

    {{- if $paginator.HasNext -}}
      <a class="border rounded-full px-6 py-2 hover:bg-zinc-200" href="{{ $paginator.Next.URL }}">Sau &gt;</a>
    {{- end -}}
  </div>
</section>

{{- partial "content/newsletter.html" . -}}

{{ end }}
